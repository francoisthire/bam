<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Shrinker (bam.Bam.Std.Shrinker)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../index.html">bam</a> &#x00BB; <a href="../../index.html">Bam</a> &#x00BB; <a href="../index.html">Std</a> &#x00BB; Shrinker</nav><header class="odoc-preamble"><h1>Module <code><span>Std.Shrinker</span></code></h1><p>This module contains the various strinking strategies which can be used with the generators below.</p></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> <span>'a t</span></span><span> = </span></code><ol><li id="type-t.Default" class="def variant constructor anchored"><a href="#type-t.Default" class="anchor"></a><code><span>| </span><span><span class="constructor">Default</span> : <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Default strategy for all the generators defined in this module. Refer to the documentation of each generator to know what the default strategy is.</p><span class="comment-delim">*)</span></div></li><li id="type-t.Manual" class="def variant constructor anchored"><a href="#type-t.Manual" class="anchor"></a><code><span>| </span><span><span class="constructor">Manual</span> : <span>(<span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="xref-unresolved">Stdlib</span>.Seq.t</span>)</span> <span class="arrow">&#45;&gt;</span> <span><span class="type-var">'a</span> <a href="#type-t">t</a></span></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Instead of relying on a built-in strategy, anyone can define its own shrinking strategy. To do so, given a value, the user must provide a sequence of &quot;smaller&quot; values.</p><span class="comment-delim">*)</span></div></li><li id="type-t.Pair_left" class="def variant constructor anchored"><a href="#type-t.Pair_left" class="anchor"></a><code><span>| </span><span><span class="constructor">Pair_left</span> : <span><span>(<span class="type-var">'a</span> * <span class="type-var">'b</span>)</span> <a href="#type-t">t</a></span></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Shrinking strategy for pairs where the first component is shrunk first.</p><span class="comment-delim">*)</span></div></li><li id="type-t.Pair_right" class="def variant constructor anchored"><a href="#type-t.Pair_right" class="anchor"></a><code><span>| </span><span><span class="constructor">Pair_right</span> : <span><span>(<span class="type-var">'a</span> * <span class="type-var">'b</span>)</span> <a href="#type-t">t</a></span></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Shrinking strategy for pairs where the second component is shrunk first.</p><span class="comment-delim">*)</span></div></li><li id="type-t.Pair_compare" class="def variant constructor anchored"><a href="#type-t.Pair_compare" class="anchor"></a><code><span>| </span><span><span class="constructor">Pair_compare</span> : <span>(<span><span>(<span class="type-var">'a</span> * <span class="type-var">'b</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span><span>(<span class="type-var">'a</span> * <span class="type-var">'b</span>)</span> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Stdlib</span>.Int.t)</span> <span class="arrow">&#45;&gt;</span> <span><span>(<span class="type-var">'a</span> * <span class="type-var">'b</span>)</span> <a href="#type-t">t</a></span></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Shrinking strategy for pairs where the function comparison is given to know which pair to handle first. For example <code>Pair_compare (fun _ _ -&gt; -1)</code> is equivalent to <code>Pair_left</code>. <code>Pair_compare (fun left right -&gt; compare (fst left + snd
          left) (fst right + snd right))</code> handles pair of integers by minimizing first the sum of their component.</p><span class="comment-delim">*)</span></div></li><li id="type-t.Char" class="def variant constructor anchored"><a href="#type-t.Char" class="anchor"></a><code><span>| </span><span><span class="constructor">Char</span> : <span class="xref-unresolved">Stdlib</span>.Char.t <span class="arrow">&#45;&gt;</span> <span><span class="xref-unresolved">Stdlib</span>.Char.t <a href="#type-t">t</a></span></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Shrinking strategy for chars. The shrinker will try to reduce samples to the char given.</p><span class="comment-delim">*)</span></div></li><li id="type-t.Bool" class="def variant constructor anchored"><a href="#type-t.Bool" class="anchor"></a><code><span>| </span><span><span class="constructor">Bool</span> : <span class="xref-unresolved">Stdlib</span>.Bool.t <span class="arrow">&#45;&gt;</span> <span><span class="xref-unresolved">Stdlib</span>.Bool.t <a href="#type-t">t</a></span></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Shrinking strategy for bool. The shrinker will try to reduce samples to the bool given.</p><span class="comment-delim">*)</span></div></li><li id="type-t.Float" class="def variant constructor anchored"><a href="#type-t.Float" class="anchor"></a><code><span>| </span><span><span class="constructor">Float</span> : <span class="xref-unresolved">Stdlib</span>.Float.t <span class="arrow">&#45;&gt;</span> <span><span class="xref-unresolved">Stdlib</span>.Float.t <a href="#type-t">t</a></span></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Shrinking strategy for float. The shrinker will try to reduce samples to the float given.</p><p>The strategy split the initial float into a pair of a fractional and integral part. Then the strategy behaves as <code>Pair_left</code> where the first component is the integral part and the second component is the fractional part. The shrinking behavior for the integral part behaves as the <code>Int
          n</code> strategy where <code>n</code> is the integral part of the float given. The shrinking behavior for the fractional part tries to minimize the number of decimals.</p><p>This strategy is syntactic sugar for <code>Float_precision</code> with <code>exhaustive_search_digits=0</code> and <code>precision_digits=15</code>.</p><span class="comment-delim">*)</span></div></li><li id="type-t.Float_precision" class="def variant constructor anchored"><a href="#type-t.Float_precision" class="anchor"></a><code><span>| </span><span><span class="constructor">Float_precision</span> : </span><span>{</span></code><ol><li id="type-t.exhaustive_search_digits" class="def record field anchored"><a href="#type-t.exhaustive_search_digits" class="anchor"></a><code><span>exhaustive_search_digits : int;</span></code></li><li id="type-t.precision_digits" class="def record field anchored"><a href="#type-t.precision_digits" class="anchor"></a><code><span>precision_digits : int;</span></code></li><li id="type-t.target" class="def record field anchored"><a href="#type-t.target" class="anchor"></a><code><span>target : <span class="xref-unresolved">Stdlib</span>.Float.t;</span></code></li></ol><code><span>}</span><span> <span class="arrow">&#45;&gt;</span> <span><span class="xref-unresolved">Stdlib</span>.Float.t <a href="#type-t">t</a></span></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>This shrinking strategy allows to enumerate the float numbers that can be represented with <code>exhaustive_search_digits</code> digits. While <code>precision_digits</code> allows the search up to <code>precision_digits</code> digits with respect to the original counter-example. <code>arget</code> is the same as <a href="#type-t.Float"><code>Float</code></a>.</p><span class="comment-delim">*)</span></div></li><li id="type-t.Int" class="def variant constructor anchored"><a href="#type-t.Int" class="anchor"></a><code><span>| </span><span><span class="constructor">Int</span> : <span class="xref-unresolved">Stdlib</span>.Int.t <span class="arrow">&#45;&gt;</span> <span><span class="xref-unresolved">Stdlib</span>.Int.t <a href="#type-t">t</a></span></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Shrinking strategy for int. The shrinker will try to reduce samples to the int given. The strategy follows a binary search starting with the initial sample to the integer provided by the strategy.</p><span class="comment-delim">*)</span></div></li><li id="type-t.Int32" class="def variant constructor anchored"><a href="#type-t.Int32" class="anchor"></a><code><span>| </span><span><span class="constructor">Int32</span> : <span class="xref-unresolved">Stdlib</span>.Int32.t <span class="arrow">&#45;&gt;</span> <span><span class="xref-unresolved">Stdlib</span>.Int32.t <a href="#type-t">t</a></span></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>See <a href="#type-t.Int"><code>Int</code></a></p><span class="comment-delim">*)</span></div></li><li id="type-t.Int64" class="def variant constructor anchored"><a href="#type-t.Int64" class="anchor"></a><code><span>| </span><span><span class="constructor">Int64</span> : <span class="xref-unresolved">Stdlib</span>.Int64.t <span class="arrow">&#45;&gt;</span> <span><span class="xref-unresolved">Stdlib</span>.Int64.t <a href="#type-t">t</a></span></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>See <a href="#type-t.Int"><code>Int</code></a></p><span class="comment-delim">*)</span></div></li><li id="type-t.Skip" class="def variant constructor anchored"><a href="#type-t.Skip" class="anchor"></a><code><span>| </span><span><span class="constructor">Skip</span> : </span><span>{</span></code><ol><li id="type-t.eq" class="def record field anchored"><a href="#type-t.eq" class="anchor"></a><code><span>eq : <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> <span><span class="type-var">'a</span> <span class="arrow">&#45;&gt;</span></span> bool;</span></code></li><li id="type-t.skip" class="def record field anchored"><a href="#type-t.skip" class="anchor"></a><code><span>skip : <span>[ `Auto <span><span>| `Int</span> of <span class="xref-unresolved">Stdlib</span>.Int.t</span> ]</span>;</span></code></li></ol><code><span>}</span><span> <span class="arrow">&#45;&gt;</span> <span><span><span class="type-var">'a</span> <span class="xref-unresolved">Stdlib</span>.List.t</span> <a href="#type-t">t</a></span></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Shrinking strategy for lists. The shrinker will try to reduce first on the size on the list and then shrink the elements of the lists. This strategy will try to shrink to a smaller list by skipping some elements.</p><p>Assuming the initial sample is <code>a;b;c;d</code>, it can first shrink towards a list of size <code>2</code> such as <code>a;c</code> or <code>b;d</code>, while the prefix strategy can always shrink to a prefix. Hence for a list of size <code>2</code> it must be <code>a;b</code> (and then the shrinking will shrink on <code>a</code> and <code>b</code> individually).</p><p>With <code>`Auto</code>, the tool tries to infer a good value so that the shrinking strategy remains short. With <code>`Int n</code>, the user provides the number of elements that can be skipped. This can be quite time consuming since such a strategy is at least exponential with respect to the initial size of the list.</p><span class="comment-delim">*)</span></div></li><li id="type-t.Prefix" class="def variant constructor anchored"><a href="#type-t.Prefix" class="anchor"></a><code><span>| </span><span><span class="constructor">Prefix</span> : <span><span><span class="type-var">'a</span> <span class="xref-unresolved">Stdlib</span>.List.t</span> <a href="#type-t">t</a></span></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Shrinking strategy for lists. The shrinker will try to reduce first on the size on the list and then shrink the elements of the lists. The strategy will shrink towards a prefix of the list.</p><span class="comment-delim">*)</span></div></li><li id="type-t.Suffix" class="def variant constructor anchored"><a href="#type-t.Suffix" class="anchor"></a><code><span>| </span><span><span class="constructor">Suffix</span> : <span><span><span class="type-var">'a</span> <span class="xref-unresolved">Stdlib</span>.List.t</span> <a href="#type-t">t</a></span></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Shrinking strategy for lists. The shrinker will try to reduce first on the size on the list and then shrink the elements of the lists. The strategy will shrink towards a suffix of the list.</p><span class="comment-delim">*)</span></div></li></ol></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-skip_auto"><a href="#val-skip_auto" class="anchor"></a><code><span><span class="keyword">val</span> skip_auto : <span><span><span class="type-var">'a</span> list</span> <a href="#type-t">t</a></span></span></code></div><div class="spec-doc"><p><code>skip_auto</code> is an alias for <code>Skip {eq=(=); skip=`Auto}</code></p></div></div></div></body></html>
